{"ast":null,"code":"import _defineProperty from \"C:\\\\Users\\\\Rubi Singh\\\\mern-jan-2019\\\\node-express\\\\Contact-Project-master\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"C:\\\\Users\\\\Rubi Singh\\\\mern-jan-2019\\\\node-express\\\\Contact-Project-master\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\Rubi Singh\\\\mern-jan-2019\\\\node-express\\\\Contact-Project-master\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\Rubi Singh\\\\mern-jan-2019\\\\node-express\\\\Contact-Project-master\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\Rubi Singh\\\\mern-jan-2019\\\\node-express\\\\Contact-Project-master\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\Rubi Singh\\\\mern-jan-2019\\\\node-express\\\\Contact-Project-master\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\Rubi Singh\\\\mern-jan-2019\\\\node-express\\\\Contact-Project-master\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"C:\\\\Users\\\\Rubi Singh\\\\mern-jan-2019\\\\node-express\\\\Contact-Project-master\\\\client\\\\src\\\\components\\\\authentication\\\\Login.js\";\nimport React from 'react';\nimport axios from '../../config/axios';\nimport { Redirect } from 'react-router-dom';\n\nvar UserLogin =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(UserLogin, _React$Component);\n\n  function UserLogin(props) {\n    var _this;\n\n    _classCallCheck(this, UserLogin);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(UserLogin).call(this, props));\n    _this.state = {\n      email: '',\n      password: '',\n      notice: '',\n      redirect: false\n    };\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleSubmit = _this.handleSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(UserLogin, [{\n    key: \"handleSubmit\",\n    value: function handleSubmit(e) {\n      var _this2 = this;\n\n      e.preventDefault();\n      var formData = {\n        email: this.state.email,\n        password: this.state.password\n      };\n      axios.post('/users/login', formData).then(function (response) {\n        axios.defaults.headers['x-auth'] = response.data.token;\n        localStorage.setItem('token', response.data.token);\n\n        _this2.props.handleIsAuthenticated(true);\n\n        _this2.setState(function () {\n          return {\n            redirect: true\n          };\n        }); // this.props.history.push('/contacts')\n\n      }).catch(function (err) {\n        console.log('error', err);\n\n        _this2.setState(function () {\n          return {\n            notice: err.response.data.notice\n          };\n        });\n      });\n    }\n  }, {\n    key: \"handleChange\",\n    value: function handleChange(e) {\n      e.persist();\n      this.setState(function () {\n        return _defineProperty({}, e.target.name, e.target.value);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      console.log(this.props);\n\n      if (this.state.redirect) {\n        return React.createElement(Redirect, {\n          to: \"/contacts\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 52\n          },\n          __self: this\n        });\n      }\n\n      return React.createElement(\"div\", {\n        class: \"modal-dialog modal-sm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"modal-content\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"modal-header bg-info text-white\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }, \"Login\")), this.state.notice && React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }, \" \", this.state.notice, \" \"), React.createElement(\"form\", {\n        onSubmit: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"modal-body\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"email\",\n        class: \"form-control\",\n        placeholder: \" Email\",\n        value: this.state.email,\n        onChange: this.handleChange,\n        name: \"email\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        class: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"password\",\n        class: \"form-control\",\n        placeholder: \"password\",\n        value: this.state.password,\n        onChange: this.handleChange,\n        name: \"password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      })), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"submit\",\n        class: \"btn btn-info\",\n        value: \"submit \",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      })))));\n    }\n  }]);\n\n  return UserLogin;\n}(React.Component);\n\nexport default UserLogin;","map":{"version":3,"sources":["C:\\Users\\Rubi Singh\\mern-jan-2019\\node-express\\Contact-Project-master\\client\\src\\components\\authentication\\Login.js"],"names":["React","axios","Redirect","UserLogin","props","state","email","password","notice","redirect","handleChange","bind","handleSubmit","e","preventDefault","formData","post","then","response","defaults","headers","data","token","localStorage","setItem","handleIsAuthenticated","setState","catch","err","console","log","persist","target","name","value","Component"],"mappings":"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","sourcesContent":["import React from 'react'\nimport axios from '../../config/axios'\nimport { Redirect } from 'react-router-dom'\n\nclass UserLogin extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            email: '',\n            password: '', \n            notice: '',\n            redirect: false\n        }\n        this.handleChange = this.handleChange.bind(this)\n        this.handleSubmit = this.handleSubmit.bind(this)\n    }\n\n    handleSubmit(e) {\n        e.preventDefault()\n        const formData = {\n            email: this.state.email,\n            password: this.state.password\n        }\n\n        axios.post('/users/login', formData)\n            .then(response => {\n                axios.defaults.headers['x-auth'] = response.data.token\n                localStorage.setItem('token', response.data.token)\n                this.props.handleIsAuthenticated(true)\n                this.setState(() => ({ redirect: true }))\n                // this.props.history.push('/contacts')\n            })\n            .catch(err => {\n                console.log('error',err)\n                this.setState(() => ({\n                    notice: err.response.data.notice \n                }))\n            })\n\n    }\n\n    handleChange(e) {\n        e.persist()\n        this.setState(() => ({\n            [e.target.name]: e.target.value\n        }))\n    }\n\n    render() {\n        console.log(this.props)\n        if(this.state.redirect) {\n            return <Redirect to=\"/contacts\" />\n        }\n        return (\n            <div class=\"modal-dialog modal-sm\">\n                \n            <div class=\"modal-content\">\n            <div class=\"modal-header bg-info text-white\">\n                <h3>Login</h3>\n                \n               </div>\n                { this.state.notice && <p> { this.state.notice } </p> }\n                <form onSubmit={this.handleSubmit}>\n                <div class=\"modal-body\">\n                    <div class=\"form-group\">\n                            <input type=\"email\" class=\"form-control\" placeholder=\" Email\" value={this.state.email} onChange={this.handleChange} name=\"email\" />\n                        </div>\n                    \n                        <div class=\"form-group\">\n                      <input type=\"password\"class=\"form-control\"placeholder=\n                      \"password\" value={this.state.password} onChange={this.handleChange} name=\"password\" />\n                       </div>\n                     <br />\n\n                    {/*<input type=\"submit\" />*/}\n                    <input type=\"submit\" class=\"btn btn-info\" value=\"submit \"></input>\n                    </div>\n                </form>\n            </div>\n            </div>\n            \n            \n            \n        )\n    }\n}\n\nexport default UserLogin"]},"metadata":{},"sourceType":"module"}